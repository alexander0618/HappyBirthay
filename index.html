<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Soarele • Luna • Adevărul</title>
  <meta name="description" content="O mică surpriză interactivă de ziua ta, construită în jurul soarelui, lunii și adevărului." />
  <meta property="og:title" content="Soarele • Luna • Adevărul" />
  <meta property="og:description" content="O mică surpriză interactivă de ziua ta, construită în jurul soarelui, lunii și adevărului." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0b1220" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1220;  
      --card:#0f172a;         
      --ink:#dbeafe;         
      --muted:#94a3b8;        
      --accent:#7ef29d;      
      --gold:#f2c46d;         
      --moon:#c3dafe;         
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.03) inset;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 800px at 70% -10%, rgba(126,242,157,.08), transparent 60%),
      radial-gradient(800px 600px at 20% 110%, rgba(242,196,109,.06), transparent 60%), var(--bg);
      color:var(--ink); font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
      line-height:1.6; -webkit-font-smoothing:antialiased; scroll-behavior:smooth;
    }
    a{color:var(--accent); text-decoration:none}
    header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(6px); background:linear-gradient(to bottom, rgba(11,18,32,.85), rgba(11,18,32,.55)); border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{max-width:1080px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; padding:12px 18px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:700}
    .brand .sig{width:12px; height:12px; border-radius:999px; background:linear-gradient(135deg, var(--gold), #ffd48f); box-shadow:0 0 20px rgba(242,196,109,.5)}
    .nav a{padding:8px 12px; border-radius:10px; transition:.2s ease background-color, .2s ease color}
    .nav a:hover{background:rgba(126,242,157,.08)}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; background:linear-gradient(135deg, rgba(126,242,157,.12), rgba(195,218,254,.1)); border:1px solid rgba(255,255,255,.08); box-shadow:var(--shadow); color:var(--ink)}

    .hero{position:relative; overflow:hidden}
    .hero-wrap{max-width:1080px; margin:0 auto; padding:72px 18px 36px}
    .h1{font-family:"Playfair Display", serif; font-weight:600; font-size: clamp(30px, 6vw, 60px); line-height:1.15; letter-spacing:.3px}
    .subtitle{max-width:60ch; color:var(--muted)}

    .space{position:absolute; inset:0; pointer-events:none}
    canvas#sky{position:absolute; inset:0; width:100%; height:100%}
    .sun{position:absolute; right:8%; top:12%; width:min(22vw,180px); height:min(22vw,180px); border-radius:999px; background:radial-gradient(circle at 30% 30%, #fff5d6, var(--gold)); box-shadow:0 0 80px rgba(242,196,109,.55)}
    .moon{position:absolute; left:2%; top:2%; width:min(18vw,140px); height:min(18vw,140px); border-radius:999px; background:radial-gradient(circle at 30% 30%, #ffffff, var(--moon)); box-shadow:0 0 60px rgba(195,218,254,.45)}

    .cards{display:grid; grid-template-columns:repeat(12, 1fr); gap:20px; max-width:1080px; margin:0 auto; padding:16px 18px 70px}
    .card{grid-column: span 12; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); box-shadow:var(--shadow); padding:20px}
    .card h2{margin:.2rem 0 .4rem; font-size: clamp(20px, 2.2vw, 28px)}
    .card p{color:var(--muted)}
    .card .soft{color:#a1a1aa; font-size:.95rem}
    .card video, .card img{width:100%; border-radius:14px; display:block}
    .grid-6{grid-column: span 12}
    @media(min-width:860px){ .grid-6{grid-column: span 6} }

    .quote{font-family:"Playfair Display", serif; font-size:clamp(18px, 2.2vw, 24px); color:#e5e7eb}
    .quote b{color:var(--gold)}

    /* Joc */
    .game-wrap{display:grid; grid-template-columns:1fr; gap:12px}
    #gameCanvas{width:100%; height:52vh; max-height:420px; background:radial-gradient(800px 400px at 50% 120%, rgba(126,242,157,.04), transparent 60%), #0a1020; border-radius:14px; border:1px solid rgba(255,255,255,.06); box-shadow:var(--shadow); touch-action:none}
    .game-ui{display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:10px}
    .pill{padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.03)}
    .unlock{display:none; margin-top:6px}
    .unlock.show{display:flex}

    /* Controale tactile */
    .touchpad{display:none; gap:8px; align-items:center; justify-content:center; margin-top:6px; user-select:none}
    .tp{font-size:18px; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--ink)}
    .tp-row{display:flex; gap:8px}
    @media(max-width:780px){
      .touchpad{display:flex}
      .game-ui .pill:nth-child(2){display:none} /* ascunde indiciul pentru tastatura pe ecrane mici */
    }

    /* Footer */
    footer{border-top:1px solid rgba(255,255,255,.06); margin-top:40px}
    .foot{max-width:1080px; margin:0 auto; padding:30px 18px; color:#9aa4b2; font-size:.95rem}
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="brand"><span class="sig"></span> Soarele • Luna • Adevărul</div>
      <div>
        <a href="#home">Acasă</a>
        <a href="#game">Constelații</a>
        <a href="#letter">Scrisoare</a>
        <a href="#video">Cadou</a>
      </div>
    </nav>
  </header>

  <section id="home" class="hero">
    <div class="space" aria-hidden="true">
      <canvas id="sky"></canvas>
      <div class="sun" role="img" aria-label="soare"></div>
      <div class="moon" role="img" aria-label="lună"></div>
    </div>
    <div class="hero-wrap">
      <br>
      <h1 class="h1">Soarele, luna și adevărul</h1>
      <p class="subtitle">Un mic univers creat doar pentru tine. Trei lumini pe care nimeni nu le poate ascunde. Parcurge-le, iar la final te așteaptă surpriza ta de ziua ta.</p>
      <div style="margin-top:18px; display:flex; gap:12px; flex-wrap:wrap">
        <a class="btn" href="#game">Începe micuța călătorie</a>
        <a class="btn" href="#video">Mergi la cadou</a>
      </div>
    </div>
  </section>

  <main>
    <div class="cards">
      <article class="card grid-6">
        <h2>Capitolul I — Soarele</h2>
        <p class="soft">Căldura care apare chiar și în zilele cu nori.</p>
        <p class="quote"><b>Soarele</b> nu cere nimic și totuși dăruiește lumina tuturor.</p>
      </article>
      <article class="card grid-6">
        <h2>Capitolul II — Luna</h2>
        <p class="soft">Liniștea care ghidează corăbiile în noapte.</p>
        <p class="quote"><b>Luna</b> nu strălucește prin propria lumină, ci prin adevărul pe care îl reflectă.</p>
      </article>

      <article class="card" id="game">
        <h2>Capitolul III — Constelații (mini‑joc)</h2>
        <p>Mișcă cometa din taste sau folosind butoanele tactile și adună 3 stele luminoase. Când le strângi, o linie de stele ascunsă scrie un mesaj și deblochează cadoul de mai jos.</p>
        <div class="game-wrap">
          <canvas id="gameCanvas" width="1024" height="512" aria-label="joc constelații" role="img"></canvas>
          <div class="game-ui">
            <div class="pill" id="progress">Stele: 0 / 3</div>
            <div class="pill">Controale: ← → ↑ ↓</div>
            <button class="btn" id="resetBtn" type="button">Resetează</button>
          </div>
          <div class="touchpad" id="touchpad">
            <button class="tp tp-up" data-dir="ArrowUp" aria-label="Sus">▲</button>
            <div class="tp-row">
              <button class="tp tp-left" data-dir="ArrowLeft" aria-label="Stânga">◀</button>
              <button class="tp tp-down" data-dir="ArrowDown" aria-label="Jos">▼</button>
              <button class="tp tp-right" data-dir="ArrowRight" aria-label="Dreapta">▶</button>
            </div>
          </div>
          <div class="unlock" id="unlockRow">
            <a class="btn" href="#video">Deblocat — Deschide cadoul</a>
          </div>
        </div>
      </article>

      <article class="card" id="letter">
        <h2>Scrisoare</h2>
        <p>Ceva de scris</p>
        <p class="quote">Ceva dragut pe care urmeaza sa-l scriu</p>
      </article>

      <article class="card" id="video">
        <h2>Cadou — Pentru tine</h2>
        <p class="soft">La mulți ani!!!</p>
        <video id="giftVideo" preload="none" poster="" style="max-height:70vh" controlslist="nodownload noplaybackrate noremoteplayback" disablepictureinpicture playsinline></video>
        <p style="margin-top:10px; color:var(--muted)">Dacă videoclipul e blocat, termină mini‑jocul Constelații.</p>
      </article>
    </div>
  </main>

  <footer>
    <div class="foot">Făcut cu grijă sub același cer.</div>
  </footer>

  <script>
    // --- Fundal instelat — optimizat pentru telefon (DPR scaling) -----------
    const sky = document.getElementById('sky');
    const sctx = sky.getContext('2d');
    let stars = [];
    const STAR_COUNT = 120;
    function fitSky(){
      const dpr = window.devicePixelRatio || 1;
      sky.width = sky.clientWidth * dpr; sky.height = sky.clientHeight * dpr; sctx.setTransform(dpr,0,0,dpr,0,0);
    }
    function makeStars(){
      stars = Array.from({length: STAR_COUNT}, () => ({
        x: Math.random()*sky.clientWidth,
        y: Math.random()*sky.clientHeight,
        r: Math.random()*1.1+0.2,
        a: Math.random()*0.6+0.2,
        tw: Math.random()*0.02+0.005
      }));
    }
    function drawSky(){
      sctx.clearRect(0,0,sky.clientWidth, sky.clientHeight);
      for(const st of stars){
        st.a += st.tw; if(st.a>1 || st.a<0.2) st.tw*=-1;
        sctx.globalAlpha = st.a; sctx.fillStyle = '#c3dafe';
        sctx.beginPath(); sctx.arc(st.x, st.y, st.r, 0, Math.PI*2); sctx.fill();
      }
      requestAnimationFrame(drawSky);
    }
    addEventListener('resize', ()=>{fitSky(); makeStars();});
    fitSky(); makeStars(); drawSky();

    // --- Mini‑joc Constelatii — mobil + desktop -----------------------------
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const progress = document.getElementById('progress');
    const unlockRow = document.getElementById('unlockRow');
    const resetBtn = document.getElementById('resetBtn');

    let world = { w: 1024, h: 512 };
    const comet = { x: 512, y: 420, vx:0, vy:0, size: 7, speed: 1.3, drag: 0.90 };
    let keys = {};

    const orbs = [
      {x: 0.2, y: 0.35, r:10, hit:false},
      {x: 0.8, y: 0.30, r:10, hit:false},
      {x: 0.5, y: 0.18, r:10, hit:false},
    ];

    const glyph = [ // constelatie tip "ADEVARUL"/"TRUTH"
      {x:0.20, y:0.65}, {x:0.28, y:0.45}, {x:0.36, y:0.65},
      {x:0.28, y:0.45}, {x:0.44, y:0.45},
      {x:0.50, y:0.65}, {x:0.50, y:0.45},
      {x:0.56, y:0.65}, {x:0.56, y:0.52},
      {x:0.62, y:0.65}, {x:0.62, y:0.45},
      {x:0.68, y:0.65}, {x:0.68, y:0.52},
      {x:0.74, y:0.65}, {x:0.74, y:0.45}
    ];

    let collected = 0, unlocked = false, everUnlocked = false;

    function fitGame(){
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * dpr; canvas.height = rect.height * dpr; ctx.setTransform(dpr,0,0,dpr,0,0);
      world.w = rect.width; world.h = rect.height;
      resetGame();
    }

    function resetGame(){
      comet.x = world.w*0.5; comet.y = world.h*0.8; comet.vx=0; comet.vy=0;
      orbs.forEach(o=>o.hit=false); collected = 0;
      progress.textContent = `Stele: ${collected} / 3`;
      unlocked = false; // poti rejuca
      if (everUnlocked) {
        unlockRow.classList.add('show'); // mentine butonul deblocare vizibil
      } else {
        unlockRow.classList.remove('show');
      }
      // curata panza (constelatia desenată anterior dispare după reset)
      ctx.clearRect(0,0,world.w,world.h);
    }

    function loop(){
      if(keys['ArrowLeft']) comet.vx -= comet.speed;
      if(keys['ArrowRight']) comet.vx += comet.speed;
      if(keys['ArrowUp']) comet.vy -= comet.speed;
      if(keys['ArrowDown']) comet.vy += comet.speed;
      comet.vx *= comet.drag; comet.vy *= comet.drag;
      comet.x += comet.vx; comet.y += comet.vy;
      comet.x = Math.max(8, Math.min(world.w-8, comet.x));
      comet.y = Math.max(8, Math.min(world.h-8, comet.y));

      for(const o of orbs){
        if(!o.hit){
          const ox = o.x*world.w, oy = o.y*world.h;
          const dx = ox - comet.x, dy = oy - comet.y;
          const d2 = dx*dx + dy*dy;
          if(d2 < (o.r+comet.size)*(o.r+comet.size)){
            o.hit = true; collected++; progress.textContent = `Stele: ${collected} / 3`;
            if(collected===3){ unlocked = true; everUnlocked = true; unlockRow.classList.add('show'); revealConstellation(); enableVideo(); }
          }
        }
      }

      ctx.clearRect(0,0,world.w, world.h);

      ctx.globalAlpha = 0.25; ctx.fillStyle = '#c3dafe';
      for(let i=0;i<80;i++){
        const x = (i*97 % world.w), y = (i*47 % world.h);
        ctx.fillRect(x, y, 1, 1);
      }
      ctx.globalAlpha = 1;

      for(const o of orbs){
        if(!o.hit){
          const ox = o.x*world.w, oy = o.y*world.h;
          const glow = ctx.createRadialGradient(ox, oy, 0, ox, oy, 24);
          glow.addColorStop(0,'rgba(126,242,157,.9)');
          glow.addColorStop(1,'rgba(126,242,157,0)');
          ctx.fillStyle = glow; ctx.beginPath(); ctx.arc(ox, oy, 24, 0, Math.PI*2); ctx.fill();
          ctx.fillStyle = '#7ef29d'; ctx.beginPath(); ctx.arc(ox, oy, o.r, 0, Math.PI*2); ctx.fill();
        }
      }

      const tail = ctx.createLinearGradient(comet.x, comet.y-10, comet.x, comet.y+30);
      tail.addColorStop(0,'rgba(195,218,254,.0)');
      tail.addColorStop(1,'rgba(195,218,254,.35)');
      ctx.strokeStyle = tail; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(comet.x, comet.y); ctx.lineTo(comet.x, comet.y+30); ctx.stroke();
      const cometGlow = ctx.createRadialGradient(comet.x, comet.y, 0, comet.x, comet.y, 16);
      cometGlow.addColorStop(0,'#ffffff'); cometGlow.addColorStop(1,'#c3dafe');
      ctx.fillStyle = cometGlow; ctx.beginPath(); ctx.arc(comet.x, comet.y, comet.size, 0, Math.PI*2); ctx.fill();

      if(!unlocked) requestAnimationFrame(loop);
    }

    function revealConstellation(){
      let t = 0; const path = glyph.map(p=>({x: p.x*world.w, y:p.y*world.h}));
      function anim(){
        ctx.globalAlpha = 1; ctx.lineWidth = 2; ctx.strokeStyle = '#ffd48f';
        ctx.beginPath();
        for(let i=0;i<path.length-1;i++){
          const a = path[i], b = path[i+1];
          ctx.moveTo(a.x, a.y); ctx.lineTo(a.x + (b.x-a.x)*Math.min(1, t/2000), a.y + (b.y-a.y)*Math.min(1, t/2000));
        }
        ctx.stroke();
        for(const p of path){
          const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 10);
          g.addColorStop(0,'rgba(242,196,109,.9)'); g.addColorStop(1,'rgba(242,196,109,0)');
          ctx.fillStyle = g; ctx.beginPath(); ctx.arc(p.x, p.y, 10, 0, Math.PI*2); ctx.fill();
        }
        t += 16; if(t<2200) requestAnimationFrame(anim);
      }
      anim();
    }

    addEventListener('keydown', e=>{ keys[e.key] = true; });
    addEventListener('keyup', e=>{ keys[e.key] = false; });

    // Controale tactile
    function bindTouch(btn){
      if(!btn) return;
      const dir = btn.getAttribute('data-dir');
      btn.addEventListener('pointerdown', e=>{ e.preventDefault(); keys[dir] = true; });
      btn.addEventListener('pointerup', e=>{ e.preventDefault(); keys[dir] = false; });
      btn.addEventListener('pointerleave', e=>{ keys[dir] = false; });
      btn.addEventListener('pointercancel', e=>{ keys[dir] = false; });
    }
    Array.from(document.querySelectorAll('.tp')).forEach(bindTouch);

    // Buton reset: reseteaza jocul dar pastrează accesul la video daca a fost deblocat vreodata
    resetBtn.addEventListener('click', () => {
      resetGame();
      requestAnimationFrame(loop); // reporneste animatia dacă fusese oprita
    });

    // fit & start
    addEventListener('resize', fitGame);
    fitGame();
    loop();

    // --- Video (accesibil doar după prima finalizare; ramane accesibil ulterior) ---
    const giftVideo = document.getElementById('giftVideo');

    // Blocheaza interactiunea până la prima deblocare
    giftVideo.addEventListener('click', (e) => {
      if (!everUnlocked) {
        e.preventDefault();
        e.stopPropagation();
        alert('Adună cele trei stele din mini‑jocul Constelații ca să deblochezi cadoul.');
      }
    });

    function enableVideo(){
      const SOURCE_NAME = 'LaMultiAni.mp4';
      while (giftVideo.firstChild) giftVideo.removeChild(giftVideo.firstChild);
      const src = document.createElement('source');
      src.src = SOURCE_NAME; src.type = 'video/mp4';
      giftVideo.appendChild(src);
      giftVideo.controls = true;
      giftVideo.preload = 'metadata';
      giftVideo.load();
    }
  </script>
</body>
</html>
